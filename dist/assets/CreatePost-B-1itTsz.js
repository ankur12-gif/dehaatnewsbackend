import{f as v,r as o,a as w,g as y,j as e,k as i}from"./index-DuLuWPBD.js";import{L as N}from"./index-CVx9NNeg.js";import{S as k,N as S,P as C,a as P}from"./pagination-Dvx4S9ZD.js";const E=()=>{var d;const{user:r}=v(t=>t.user),[m,g]=o.useState(""),[h,x]=o.useState(""),[n,p]=o.useState("general"),b=w(),[j,{isLoading:c}]=y(),a=N("multiple",5),f=async t=>{var u;t.preventDefault(),console.log("form submit");const s=new FormData;s.set("title",m),s.set("description",h),s.set("category",n),s.set("photos","https://ik.imagekit.io/cxa7ojrtpq/uploads/1_Yj9KgxMor.jpg"),console.log("formData");try{const l=await j({id:r==null?void 0:r._id,postData:s});console.log({res:l}),(u=l.data)!=null&&u.success?(i.success("Post created successfully"),b("/admin")):i.error("Failed to create post")}catch(l){i.error(`An error occurred while creating the post ${l}`)}};return e.jsxs("div",{className:"bg-gray-600 pt-20 min-h-screen flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white h-96 w-full md:w-1/2 rounded-lg mb-4 flex items-center justify-center p-4 overflow-hidden",children:[a.error&&e.jsx("p",{className:"text-red-500",children:a.error}),((d=a.preview)==null?void 0:d.length)>0?e.jsx(k,{modules:[S,C],navigation:!0,pagination:{clickable:!0},className:"w-full h-full",children:a.preview.map((t,s)=>e.jsx(P,{className:"flex justify-center items-center",children:e.jsx("img",{src:t,alt:`Preview ${s}`,className:"w-full h-full object-contain rounded-lg"})},s))}):e.jsx("p",{className:"text-center",children:"No images selected"})]}),e.jsx("div",{className:"bg-white w-full md:w-1/2 text-black font-bold p-6 rounded-lg",children:e.jsxs("form",{className:"flex flex-col space-y-6",onSubmit:f,children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-lg block",children:"Title"}),e.jsx("input",{type:"text",placeholder:"Enter Title",onChange:t=>g(t.target.value),className:"px-4 py-2.5 text-lg rounded-md bg-white border border-gray-400 w-full outline-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-base block",children:"Description"}),e.jsx("textarea",{placeholder:"Type Message",onChange:t=>x(t.target.value),className:"p-4 bg-white mx-auto w-full block text-sm border border-gray-400 outline-[#007bff] rounded",rows:"4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-base block",children:"Category"}),e.jsxs("select",{value:n,onChange:t=>p(t.target.value),className:"px-4 py-2.5 text-lg rounded-md bg-white border border-gray-400 w-full outline-blue-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"crime",children:"Crime"}),e.jsx("option",{value:"health",children:"Health"}),e.jsx("option",{value:"sports",children:"Sports"}),e.jsx("option",{value:"story",children:"Story"}),e.jsx("option",{value:"farming",children:"Farming"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-base block",children:"Photos"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a.changeHandler,className:"w-auto bg-gray-300 p-1 hover:bg-gray-700 hover:text-white rounded-2xl"})]}),e.jsx("button",{type:"submit",disabled:c,className:"bg-black text-white h-12 rounded-2xl hover:bg-blue-900 transition-colors duration-300",children:c?"Creating...":"Create"})]})})]})};export{E as default};
