import{d as z,e as E,r as a,a as L,f as M,j as e,k as o}from"./index-DuLuWPBD.js";import{c as R,T as B,r as c,I as G}from"./index-BE4UuH5r.js";import{L as F}from"./Loader-DhB2Cd9g.js";/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],O=R("Pencil",J),q=()=>{const{data:r,isLoading:x,isError:u}=z(),[p]=E(),[d,i]=a.useState([]),l=L(),{user:m}=M(s=>s.user),g=s=>{l(`/update/${s}`)},b=async s=>{var n;if(window.confirm("Are you sure you want to delete this post?"))try{(n=(await p({postId:s,userId:m._id})).data)!=null&&n.success?(o.success("Post deleted successfully"),i(D=>D.filter(_=>_._id!==s))):o.error("Failed to delete post")}catch{o.error("An error occurred while deleting the post")}},h=a.useMemo(()=>[{Header:"ID",accessor:"_id"},{Header:"Title",accessor:"title"},{Header:"Created At",accessor:"createdAt"},{Header:"Updated At",accessor:"updatedAt"},{Header:"Action",accessor:"actions",Cell:({row:s})=>e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("button",{className:"text-blue-500 hover:text-blue-700 cursor-pointer",onClick:()=>g(s.original._id),children:e.jsx(O,{size:20})}),e.jsx("button",{className:"text-red-500 hover:text-red-700 cursor-pointer",onClick:()=>b(s.original._id),children:e.jsx(B,{size:20})})]})}],[]);a.useEffect(()=>{r&&JSON.stringify(r.posts)!==JSON.stringify(d)&&i(r.posts)},[r]);const f=a.useMemo(()=>d,[d]),{getTableProps:y,getTableBodyProps:j,headerGroups:P,page:N,prepareRow:v,nextPage:w,previousPage:C,canPreviousPage:k,canNextPage:A,state:{pageIndex:S},pageCount:H}=c.useTable({columns:h,data:f},c.useSortBy,c.usePagination),I=()=>{l("/createPost")};return u&&o.error("Some error occurred"),x?e.jsx(F,{}):e.jsxs("div",{className:"flex flex-col items-center h-screen bg-gray-600 p-4",children:[e.jsx("div",{className:"w-full max-w-6xl overflow-x-auto mt-24 rounded-b-xl",children:e.jsxs("table",{...y(),className:"table-auto w-full border border-gray-300 shadow-md rounded-lg bg-white",children:[e.jsx("thead",{className:"bg-black text-white",children:P.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(t=>e.jsxs("th",{...t.getHeaderProps(t.getSortByToggleProps()),className:"px-4 py-2 border border-gray-300 text-sm md:text-base text-center",children:[t.render("Header"),t.isSorted&&e.jsx("span",{children:t.isSortedDesc?" ↓":" ↑"})]},t.id))},s.id))}),e.jsx("tbody",{...j(),children:N.map(s=>(v(s),e.jsx("tr",{...s.getRowProps(),className:"hover:bg-gray-100",children:s.cells.map(t=>e.jsx("td",{...t.getCellProps(),className:"px-4 py-2 border border-gray-300 text-sm md:text-base text-center",children:t.render("Cell")},t.id))},s.id)))})]})}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("button",{className:"font-bold text-white bg-blue-600 hover:bg-blue-800 px-4 py-2 rounded-lg disabled:opacity-50",onClick:C,disabled:!k,children:"Prev"}),e.jsxs("span",{className:"text-sm md:text-base text-white",children:["Page ",S+1," of ",H]}),e.jsx("button",{className:"font-bold text-white bg-blue-600 hover:bg-blue-800 px-4 py-2 rounded-lg disabled:opacity-50",onClick:w,disabled:!A,children:"Next"}),e.jsx("div",{className:"cursor-pointer hover:bg-gray-500",onClick:I,children:e.jsx(G,{size:40})})]})]})};export{q as default};
