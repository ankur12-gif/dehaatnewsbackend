import{p as E,q as I,r as a,a as R,f as z,j as e,k as o}from"./index-ftk_uoOV.js";import{T as B,r as c,I as G}from"./index-HKJ-IFPC.js";import{L}from"./Loader-1BNeB-Jp.js";const O=()=>{const{data:t,isLoading:i,isError:p}=E(),[x]=I(),[d,l]=a.useState([]),u=R();z(s=>s.user);const g=async s=>{var n;if(window.confirm("Are you sure you want to delete this sponsor?"))try{(n=(await x(s)).data)!=null&&n.success?(o.success("Sponsor deleted successfully"),l(k=>k.filter(D=>D._id!==s))):o.error("Failed to delete sponsor")}catch{o.error("An error occurred while deleting the sponsor")}},m=a.useMemo(()=>[{Header:"ID",accessor:"_id"},{Header:"Name",accessor:"name"},{Header:"Created At",accessor:"createdAt"},{Header:"Updated At",accessor:"updatedAt"},{Header:"Action",accessor:"actions",Cell:({row:s})=>e.jsx("div",{className:"flex gap-2 justify-center",children:e.jsx("button",{className:"text-red-500 hover:text-red-700 cursor-pointer",onClick:()=>g(s.original._id),children:e.jsx(B,{size:20})})})}],[]);a.useEffect(()=>{t&&JSON.stringify(t.sponsors)!==JSON.stringify(d)&&l(t.sponsors)},[t]);const b=a.useMemo(()=>d,[d]),{getTableProps:h,getTableBodyProps:f,headerGroups:y,page:j,prepareRow:N,nextPage:v,previousPage:w,canPreviousPage:S,canNextPage:P,state:{pageIndex:C},pageCount:A}=c.useTable({columns:m,data:b},c.useSortBy,c.usePagination),H=()=>{u("/createSponsors")};return p&&o.error("Some error occurred"),i?e.jsx(L,{}):e.jsxs("div",{className:"flex flex-col items-center h-screen bg-gray-600 p-4",children:[e.jsx("div",{className:"w-full max-w-6xl overflow-x-auto mt-24 rounded-b-xl",children:e.jsxs("table",{...h(),className:"table-auto w-full border border-gray-300 shadow-md rounded-lg bg-white",children:[e.jsx("thead",{className:"bg-black text-white",children:y.map(s=>e.jsx("tr",{...s.getHeaderGroupProps(),children:s.headers.map(r=>e.jsxs("th",{...r.getHeaderProps(r.getSortByToggleProps()),className:"px-4 py-2 border border-gray-300 text-sm md:text-base text-center",children:[r.render("Header"),r.isSorted&&e.jsx("span",{children:r.isSortedDesc?" ↓":" ↑"})]},r.id))},s.id))}),e.jsx("tbody",{...f(),children:j.map(s=>(N(s),e.jsx("tr",{...s.getRowProps(),className:"hover:bg-gray-100",children:s.cells.map(r=>e.jsx("td",{...r.getCellProps(),className:"px-4 py-2 border border-gray-300 text-sm md:text-base text-center",children:r.render("Cell")},r.id))},s.id)))})]})}),e.jsxs("div",{className:"flex items-center gap-4 mt-4",children:[e.jsx("button",{className:"font-bold text-white bg-blue-600 hover:bg-blue-800 px-4 py-2 rounded-lg disabled:opacity-50",onClick:w,disabled:!S,children:"Prev"}),e.jsxs("span",{className:"text-sm md:text-base text-white",children:["Page ",C+1," of ",A]}),e.jsx("button",{className:"font-bold text-white bg-blue-600 hover:bg-blue-800 px-4 py-2 rounded-lg disabled:opacity-50",onClick:v,disabled:!P,children:"Next"}),e.jsx("div",{className:"cursor-pointer hover:bg-gray-500",onClick:H,children:e.jsx(G,{size:40})})]})]})};export{O as default};
