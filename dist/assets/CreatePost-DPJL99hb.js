import{c as v,r as o,b as w,d as y,j as e,k as a}from"./index-B5Vhddee.js";import{L as N}from"./index-B9Pnaagn.js";import{S,N as k,P as C,a as P}from"./pagination-2c7keMi5.js";const T=()=>{var u;const{user:m}=v(t=>t.user),[i,p]=o.useState(""),[n,x]=o.useState(""),[c,g]=o.useState("general"),b=w(),[f,{isLoading:d}]=y(),s=N("multiple",5),j=async t=>{var h;if(t.preventDefault(),!i||!n){a.error("Enter all fields");return}if(!s.file||s.file.length===0){a.error("Please select at least one photo");return}const r=new FormData;r.set("title",i),r.set("description",n),r.set("category",c),s.file.forEach(l=>{r.append("photos",l)});try{(h=(await f({id:m._id,postData:r})).data)!=null&&h.success?(a.success("Post created successfully"),b("/admin")):a.error("Failed to create post")}catch(l){a.error(`An error occurred while creating the post ${l}`)}};return e.jsxs("div",{className:"bg-gray-600 pt-20 min-h-screen flex flex-col items-center justify-center p-4",children:[e.jsxs("div",{className:"bg-white h-96 w-full md:w-1/2 rounded-lg mb-4 flex items-center justify-center p-4 overflow-hidden",children:[s.error&&e.jsx("p",{className:"text-red-500",children:s.error}),((u=s.preview)==null?void 0:u.length)>0?e.jsx(S,{modules:[k,C],navigation:!0,pagination:{clickable:!0},className:"w-full h-full",children:s.preview.map((t,r)=>e.jsx(P,{className:"flex justify-center items-center",children:e.jsx("img",{src:t,alt:`Preview ${r}`,className:"w-full h-full object-contain rounded-lg"})},r))}):e.jsx("p",{className:"text-center",children:"No images selected"})]}),e.jsx("div",{className:"bg-white w-full md:w-1/2 text-black font-bold p-6 rounded-lg",children:e.jsxs("form",{className:"flex flex-col space-y-6",onSubmit:j,children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-lg block",children:"Title"}),e.jsx("input",{type:"text",placeholder:"Enter Title",onChange:t=>p(t.target.value),className:"px-4 py-2.5 text-lg rounded-md bg-white border border-gray-400 w-full outline-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-base block",children:"Description"}),e.jsx("textarea",{placeholder:"Type Message",onChange:t=>x(t.target.value),className:"p-4 bg-white mx-auto w-full block text-sm border border-gray-400 outline-[#007bff] rounded",rows:"4"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-base block",children:"Category"}),e.jsxs("select",{value:c,onChange:t=>g(t.target.value),className:"px-4 py-2.5 text-lg rounded-md bg-white border border-gray-400 w-full outline-blue-500",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"crime",children:"Crime"}),e.jsx("option",{value:"health",children:"Health"}),e.jsx("option",{value:"sports",children:"Sports"}),e.jsx("option",{value:"story",children:"Story"}),e.jsx("option",{value:"farming",children:"Farming"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-2 text-base block",children:"Photos"}),e.jsx("input",{type:"file",accept:"image/*",multiple:!0,required:!0,onChange:s.changeHandler,className:"w-auto bg-gray-300 p-1 hover:bg-gray-700 hover:text-white rounded-2xl"})]}),e.jsx("button",{type:"submit",disabled:d,className:"bg-black text-white h-12 rounded-2xl hover:bg-blue-900 transition-colors duration-300",children:d?"Creating...":"Create"})]})})]})};export{T as default};
